name: Save Shell Output to Env
on:
  workflow_dispatch:
jobs:
  setup:
    runs-on: ubuntu-latest
    # setup job's output variable and the values
    outputs:
      current_date: ${{ steps.get_date.outputs.result }}
    steps:
      # step "id" for identifying where to get the output
      - id:   get_date
        name: Get Date and Save Result to Step Output
        # "shell" is optional if it is not bash dependent
        shell: bash
        # new syntax for setting step output using shell
        # pipe "|" is for use with multiple shell commands
        run:  |
          echo "result=`date +'%Y-%m-%d'`" >> "$GITHUB_OUTPUT"
      - name: Echo Result within the Same Job
        run: echo ${{ steps.get_date.outputs.result }}
  show_result:
    runs-on: ubuntu-latest
    # wait until "setup" is completed
    needs: setup
    steps:
      - name: Echo Result from Previous Job
        run:  echo "current date: ${{ needs.setup.outputs.current_date }}"
        
